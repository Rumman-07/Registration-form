<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Submission â€” Preview</title>

  <!-- Apply saved theme early -->
  <script>
    (function(){
      try{
        const t = localStorage.getItem('site-theme') ?? 'dark';
        document.documentElement.setAttribute('data-theme', t);
      } catch(e){}
    })();
  </script>

  <link rel="stylesheet" href="style.css">
  <style>
    /* small overrides so result page looks great */
    main.result-page{min-height:100vh;display:flex;align-items:center;justify-content:center;padding:36px}
    .result-card{width:100%;max-width:820px;background:linear-gradient(180deg, rgba(255,255,255,0.02), rgba(0,0,0,0.04));border-radius:14px;padding:22px;border:1px solid rgba(255,255,255,0.06);box-shadow:0 30px 80px rgba(0,0,0,0.6)}
    .result-grid{display:grid;grid-template-columns:1fr 1fr;gap:14px;margin-top:12px}
    .value{font-weight:700;color:var(--text);margin-top:6px}
    .controls{display:flex;gap:12px;justify-content:flex-end;margin-top:16px}
    @media(max-width:760px){ .result-grid{grid-template-columns:1fr} }
  </style>
</head>
<body>
  <button id="themeToggle" class="theme-toggle" aria-pressed="false" title="Toggle theme">ðŸŒ—</button>

  <main class="result-page">
    <section class="result-card" aria-labelledby="resultHead">
      <h1 id="resultHead">Submitted â€” Preview</h1>
      <p class="subtitle">Below are the details you submitted. Use Print to save a copy, or Edit to go back.</p>

      <div id="resultArea" class="result-grid" aria-live="polite">
        <!-- populated by script -->
      </div>

      <div class="controls">
        <button id="editBtn" class="btn ghost">Edit</button>
        <button id="printBtn" class="btn primary">Print</button>
      </div>
    </section>
  </main>

  <div class="watermark">Rumman-07</div>

  <script>
    // Theme handling (same as before)
    const themeToggle = document.getElementById('themeToggle');
    function getTheme(){ return document.documentElement.getAttribute('data-theme') === 'light' ? 'light' : 'dark'; }
    function applyTheme(t){ document.documentElement.setAttribute('data-theme', t); localStorage.setItem('site-theme', t); themeToggle.textContent = t === 'light' ? 'Light' : 'Dark'; }
    themeToggle.addEventListener('click', ()=> applyTheme(getTheme() === 'light' ? 'dark' : 'light'));
    applyTheme(getTheme());

    // Load the submission from sessionStorage
    const raw = sessionStorage.getItem('registrationResult');
    const resultArea = document.getElementById('resultArea');

    if(!raw){
      resultArea.innerHTML = '<div style="grid-column:1/-1"><strong>No submission found.</strong><div style="margin-top:8px">Please submit the form first.</div></div>';
    } else {
      try {
        const data = JSON.parse(raw);

        // Optionally adopt the theme saved with form
        if(data.theme) applyTheme(data.theme);

        const pairs = [
          ['Full name', data.fullname],
          ['Email', data.email],
          ['Phone', data.phone],
          ['Date of birth', data.dob],
          ['Address', data.address],
          ['Course', data.course],
          ['Bio', (data.bio || '').replace(/\n/g,'<br>')]
        ];

        resultArea.innerHTML = ''; // clear
        pairs.forEach(([label, val])=>{
          const el = document.createElement('div');
          el.className = 'field';
          el.innerHTML = `<div class="label" style="color:var(--muted);font-size:12px;text-transform:uppercase">${label}</div>
                          <div class="value">${val || ''}</div>`;
          resultArea.appendChild(el);
        });

      } catch(e){
        resultArea.innerHTML = '<div style="grid-column:1/-1"><strong>Error reading submission.</strong></div>';
        console.error(e);
      }
    }

    // Print and Edit
    document.getElementById('printBtn').addEventListener('click', ()=> window.print());
    document.getElementById('editBtn').addEventListener('click', ()=> {
      // navigate back to form. we keep data in sessionStorage so form can be repopulated if you want to add that feature.
      window.location.href = 'index.html';
    });
  </script>
</body>
</html>
